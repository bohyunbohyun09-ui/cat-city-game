<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ë„ì‹œë¥¼ ëŒì•„ë‹¤ë‹ˆëŠ” ê³ ì–‘ì´ â€” í´ë¦­í˜• ë¯¸ë‹ˆê²Œì„</title>
<style>
  :root{
    --bg:#f0efe9; --panel:#ffffff; --accent:#e07a5f; --muted:#6b6b6b;
  }
  body { margin:0; font-family:Inter, "Noto Sans KR", system-ui, -apple-system, "Apple SD Gothic Neo", Roboto, "Helvetica Neue", Arial; background: linear-gradient(180deg,var(--bg),#e6eff6); color:#222; }
  header{padding:18px; text-align:center; background:transparent;}
  h1{margin:6px 0 0; font-size:20px}
  .container{max-width:980px;margin:18px auto;padding:18px;}
  .panel{background:var(--panel); border-radius:12px; box-shadow: 0 6px 18px rgba(0,0,0,0.08); padding:16px; margin-bottom:14px;}
  .row{display:flex; gap:12px; flex-wrap:wrap;}
  button {cursor:pointer; border:0; background:var(--accent); color:white; padding:10px 14px; border-radius:8px; font-weight:600;}
  .btn-ghost{background:transparent; color:var(--muted); border:1px solid #ddd;}
  .stats{display:flex; gap:10px; font-size:14px; align-items:center;}
  .stat{background:#fafafa;padding:8px 10px;border-radius:10px;border:1px solid #eee;}
  .map{display:grid; grid-template-columns:repeat(3,1fr); gap:12px; margin-top:12px;}
  .loc{background:#fff;padding:14px;border-radius:10px;text-align:center;box-shadow:0 3px 8px rgba(0,0,0,0.05); cursor:pointer; transition:transform .12s;}
  .loc:hover{transform:translateY(-6px)}
  .log{height:120px; overflow:auto; background:#fafafa;border-radius:8px;padding:10px;border:1px solid #eee; font-size:13px;}
  .center{display:flex;justify-content:center;align-items:center;}
  .style-tiny{display:flex;gap:8px;align-items:center;justify-content:center}
  .mini{font-size:12px;padding:6px 8px}
  .big{font-size:16px;padding:10px 14px}
  footer{font-size:12px;text-align:center;color:var(--muted);padding:12px}
  /* styles: 3 themes */
  .theme-1 { --bg: #fff6f3; --panel:#fff; --accent:#ff8fab; --muted:#7a5a5a; }
  .theme-2 { --bg: linear-gradient(180deg,#eef9ff,#f6fbff); --panel:#ffffff; --accent:#59a6ff; --muted:#54707f; }
  .theme-3 { --bg: linear-gradient(180deg,#111217,#1a1f27); --panel:#0f1720; --accent:#9b59ff; --muted:#a3a3a3; color:#eee }
  .theme-3 .loc{background:#0c1116;color:#ddd}
  .theme-3 .log{background:#071018;color:#9fd}
  .hidden{display:none}
  .location-title{font-weight:700;margin-bottom:8px}
  .inventory{display:flex;gap:8px;flex-wrap:wrap}
  .item {background:#f2f2f2;padding:6px 8px;border-radius:8px;font-size:13px}
  .muted {color:var(--muted); font-size:13px}
  .large-map .loc{height:110px;display:flex;flex-direction:column;justify-content:center}
</style>
</head>
<body>
<header class="panel center">
  <div style="width:100%;max-width:980px;">
    <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;">
      <div>
        <h1>ğŸ¾ ë„ì‹œë¥¼ ëŒì•„ë‹¤ë‹ˆëŠ” ê³ ì–‘ì´ â€” í´ë¦­í˜• ë¯¸ë‹ˆê²Œì„</h1>
        <div class="muted">ê³ ì–‘ì´ë¥¼ ê³¨ë¼ ë„ì‹œì˜ ì¥ì†Œë¥¼ í´ë¦­í•˜ê³ , ì¼ì„ ì •í•˜ê³ , ì¬ë°ŒëŠ” ê²°ê³¼ë¥¼ ë³´ì„¸ìš”!</div>
      </div>
      <div style="text-align:right">
        <div class="stats">
          <div class="stat">ì—ë„ˆì§€: <span id="energy">80</span></div>
          <div class="stat">ëˆ: <span id="money">20</span> â‚©</div>
          <div class="stat">ê¸°ë¶„: <span id="mood">ğŸ˜Š</span></div>
        </div>
      </div>
    </div>
  </div>
</header>

<main class="container">
  <section id="setup" class="panel">
    <div style="display:flex;gap:16px;align-items:center;flex-wrap:wrap;">
      <div style="flex:1;min-width:260px">
        <div class="location-title">ìºë¦­í„° ì„¤ì •</div>
        <label>ì´ë¦„: <input id="catName" value="ëª¨ì°Œ" /></label>
        <div style="margin-top:8px" class="style-tiny">
          <div>ìŠ¤íƒ€ì¼ ì„ íƒ:</div>
          <label><input type="radio" name="style" value="1" checked /> ê·€ì—½ê³  ì½”ë¯¹</label>
          <label><input type="radio" name="style" value="2" /> í˜„ì‹¤ì /ê°ì„±</label>
          <label><input type="radio" name="style" value="3" /> ì–´ë‘¡ê³  ë¯¸ìŠ¤í„°ë¦¬</label>
        </div>
        <div style="margin-top:10px">
          <button id="startBtn" class="big">â–¶ ê²Œì„ ì‹œì‘</button>
          <button id="resetBtn" class="btn-ghost mini">ì´ˆê¸°í™”</button>
        </div>
      </div>
      <div style="flex:1;min-width:260px">
        <div class="location-title">ê°„ë‹¨ ì„¤ëª…</div>
        <div class="muted">
          ë„ì‹œì˜ ì¥ì†Œë¥¼ í´ë¦­í•´ ì´ë™ â†’ ê° ì¥ì†Œì—ì„œ ì¼ì„ í•˜ê±°ë‚˜ ì‘ì€ ì´ë²¤íŠ¸ë¥¼ ê²ªìŠµë‹ˆë‹¤. ì—ë„ˆì§€/ëˆ/ê¸°ë¶„ì„ ê´€ë¦¬í•˜ì„¸ìš”.
          ê²Œì„ì€ ë¡œì»¬ì— ì €ì¥ë©ë‹ˆë‹¤. (ìƒˆë¡œê³ ì¹¨ í›„ì—ë„ ì´ì–´í•˜ê¸° ê°€ëŠ¥)
        </div>
      </div>
    </div>
  </section>

  <section id="game" class="panel hidden">
    <div style="display:flex;justify-content:space-between;align-items:center;">
      <div>
        <strong id="playerLabel">ëª¨ì°Œ</strong> â€” ì˜¤ëŠ˜ì˜ ì„ íƒ
      </div>
      <div>
        <button id="saveBtn" class="mini btn-ghost">ì €ì¥</button>
        <button id="loadBtn" class="mini btn-ghost">ë¶ˆëŸ¬ì˜¤ê¸°</button>
        <button id="newDayBtn" class="mini btn-ghost">ìƒˆë¡œìš´ ë‚ </button>
      </div>
    </div>

    <div style="margin-top:10px" class="row">
      <div style="flex:1">
        <div class="location-title">ë„ì‹œ ì§€ë„ â€” í´ë¦­í•´ì„œ ì¥ì†Œë¡œ ê°€ìš”</div>
        <div class="map large-map" id="map">
          <div class="loc" data-id="fish">ğŸŸ ìƒì„ ê°€ê²Œ ê³¨ëª©<br><small class="muted">ë§›ìˆëŠ” ëƒ„ìƒˆê°€ í’ê¸°ëŠ” ê³³</small></div>
          <div class="loc" data-id="park">ğŸŒ³ ê³µì›<br><small class="muted">íœ´ì‹ê³¼ ì´ë²¤íŠ¸ì˜ ì¥ì†Œ</small></div>
          <div class="loc" data-id="office">ğŸ¢ íšŒì‚¬ ê±´ë¬¼ ë’¤í¸<br><small class="muted">ì¼ìë¦¬ ì œì•ˆ ê°€ëŠ¥</small></div>
          <div class="loc" data-id="cafe">â˜• ì¹´í˜ ì• ê±°ë¦¬<br><small class="muted">ì‚¬ëŒë“¤ì´ ë§ì•„ìš”</small></div>
          <div class="loc" data-id="rooftop">ğŸŒ† ì˜¥ìƒ<br><small class="muted">ìˆ¨ê²¨ì§„ ì´ë²¤íŠ¸</small></div>
          <div class="loc" data-id="alley">ğŸª§ ë’·ê³¨ëª© ë²¼ë£©ì‹œì¥<br><small class="muted">ì•„ì´í…œ íšë“ì²˜</small></div>
        </div>
      </div>

      <div style="width:360px">
        <div class="location-title">ìƒì„¸</div>
        <div id="locationPanel" class="panel" style="padding:12px;background:linear-gradient(0deg,#fff,#fff);">
          <div id="locName">ë„ì‹œ ì¤‘ì‹¬</div>
          <div id="locDesc" class="muted">ì›í•˜ëŠ” ì¥ì†Œë¥¼ í´ë¦­í•˜ì„¸ìš”.</div>
          <div style="margin-top:10px" id="locActions"></div>
          <div style="margin-top:10px">
            <div class="location-title">ì¸ë²¤í† ë¦¬</div>
            <div class="inventory" id="inventory"></div>
          </div>
        </div>

        <div style="margin-top:10px">
          <div class="location-title">ë¡œê·¸</div>
          <div class="log" id="log"></div>
        </div>
      </div>
    </div>

  </section>

  <section class="panel hidden" id="minigamePanel">
    <div class="location-title">ë¯¸ë‹ˆ ê²Œì„</div>
    <div id="miniContent"></div>
    <div style="margin-top:10px"><button id="closeMini" class="btn-ghost">ë‹«ê¸°</button></div>
  </section>

</main>

<footer>ì œì‘: AI ê³ ì–‘ì´ ê²Œì„ ë°ëª¨ â€” ì €ì¥/ìˆ˜ì • ììœ ë¡­ê²Œ í•˜ì„¸ìš”</footer>

<script>
(function(){
  // ìƒíƒœ
  const state = {
    name: 'ëª¨ì°Œ',
    energy: 80,
    money: 20,
    mood: 80, // 0-100
    inventory: [],
    day: 1,
    theme: 1
  };

  // ìš”ì†Œ
  const startBtn = document.getElementById('startBtn');
  const resetBtn = document.getElementById('resetBtn');
  const setup = document.getElementById('setup');
  const game = document.getElementById('game');
  const playerLabel = document.getElementById('playerLabel');
  const energyEl = document.getElementById('energy');
  const moneyEl = document.getElementById('money');
  const moodEl = document.getElementById('mood');
  const map = document.getElementById('map');
  const locName = document.getElementById('locName');
  const locDesc = document.getElementById('locDesc');
  const locActions = document.getElementById('locActions');
  const logEl = document.getElementById('log');
  const inventoryEl = document.getElementById('inventory');
  const catNameInput = document.getElementById('catName');
  const saveBtn = document.getElementById('saveBtn');
  const loadBtn = document.getElementById('loadBtn');
  const newDayBtn = document.getElementById('newDayBtn');
  const minigamePanel = document.getElementById('minigamePanel');
  const miniContent = document.getElementById('miniContent');
  const closeMini = document.getElementById('closeMini');

  // helpers
  function log(text){ const p=document.createElement('div'); p.innerHTML=text; logEl.prepend(p); }
  function clamp(n,a,b){return Math.max(a,Math.min(b,n));}
  function updateUI(){
    document.documentElement.classList.remove('theme-1','theme-2','theme-3');
    document.documentElement.classList.add('theme-'+state.theme);
    playerLabel.textContent = state.name;
    energyEl.textContent = Math.round(state.energy);
    moneyEl.textContent = Math.round(state.money);
    moodEl.textContent = moodEmoji(state.mood);
    inventoryEl.innerHTML = '';
    state.inventory.forEach(it=>{
      const d=document.createElement('div'); d.className='item'; d.textContent=it; inventoryEl.appendChild(d);
    });
    // save quick autosave
    localStorage.setItem('cat_game_autosave', JSON.stringify(state));
  }
  function moodEmoji(m){
    if(m>70) return 'ğŸ˜¸';
    if(m>40) return 'ğŸ˜º';
    if(m>20) return 'ğŸ˜¿';
    return 'ğŸ˜¾';
  }
  function changeStat({energy=0,money=0,mood=0,addItem=null,removeItem=null}){
    state.energy = clamp(state.energy + energy, 0, 100);
    state.money  = Math.max(0, Math.round(state.money + money));
    state.mood   = clamp(state.mood + mood, 0, 100);
    if(addItem) state.inventory.push(addItem);
    if(removeItem){
      const i = state.inventory.indexOf(removeItem);
      if(i>=0) state.inventory.splice(i,1);
    }
    updateUI();
  }

  // initial
  updateUI();
  // load autosave if exists
  const autosave = localStorage.getItem('cat_game_autosave');
  if(autosave){
    try{
      const s=JSON.parse(autosave);
      if(s && confirm('ì €ì¥ëœ ê²Œì„ì´ ìˆìŠµë‹ˆë‹¤. ë¶ˆëŸ¬ì˜¬ê¹Œìš”?')) {
        Object.assign(state, s);
        document.getElementsByName('style')[(''+state.theme-1)].checked = true;
        catNameInput.value = state.name;
        updateUI();
        log('ğŸ“¦ ì €ì¥ëœ ê²Œì„ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤. ê³„ì†í•˜ì„¸ìš”.');
      }
    }catch(e){}
  }

  // Start
  startBtn.addEventListener('click', ()=>{
    state.name = (catNameInput.value || 'ëª¨ì°Œ');
    const style = document.querySelector('input[name="style"]:checked').value;
    state.theme = parseInt(style);
    setup.classList.add('hidden');
    game.classList.remove('hidden');
    updateUI();
    log(`ğŸ ${state.name}ì˜ í•˜ë£¨ê°€ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. (Day ${state.day})`);
  });

  resetBtn.addEventListener('click', ()=>{
    if(!confirm('ê²Œì„ì„ ì´ˆê¸°í™”í• ê¹Œìš”? ëª¨ë“  ì§„í–‰ì´ ì‚¬ë¼ì§‘ë‹ˆë‹¤.')) return;
    localStorage.removeItem('cat_game_autosave');
    location.reload();
  });

  // Map clicks
  map.addEventListener('click', (e)=>{
    const loc = e.target.closest('.loc');
    if(!loc) return;
    const id = loc.dataset.id;
    openLocation(id);
  });

  // Open location logic
  function openLocation(id){
    switch(id){
      case 'fish': showLocation('ìƒì„ ê°€ê²Œ ê³¨ëª©', 'ì‹ ì„ í•œ ìƒì„  ëƒ„ìƒˆê°€ ê°€ë“í•©ë‹ˆë‹¤. ìƒì¸ì—ê²Œ ê´€ì‹¬ì„ ë³´ì´ë©´ ì¼ì´ ìƒê¸¸ì§€ë„.', [
        {txt:'êµ¬ê±¸í•´ì„œ í•œ ì¡°ê° ì–»ê¸° (ë…¸ë ¥: ë‚®ìŒ)', fn:()=>{ if(Math.random()<0.7){changeStat({money:0,mood:5,addItem:'ìƒì„  ì¡°ê°'}); log('ğŸŸ ìƒì„  ì¡°ê°ì„ ì–»ì—ˆë‹¤! ê¸°ë¶„ UP');} else {changeStat({mood:-5}); log('ğŸ‘ ì•„ë¬´ë„ ì£¼ì§€ ì•Šì•˜ë‹¤...');}} },
        {txt:'ìƒì¸ ë„ì™€ì£¼ê³  ìš©ëˆ ë°›ê¸° (ë…¸ë ¥: ë³´í†µ)', fn:()=>{ if(Math.random()<0.65){changeStat({energy:-10,money:15,mood:8}); log('ğŸ’° ìƒì¸ ì¼ì´ ì˜ ë˜ì–´ ëˆì„ ë²Œì—ˆë‹¤!')} else {changeStat({energy:-8,mood:-5}); log('â›ˆ ì¼ì´ ê¼¬ì—¬ì„œ ëˆì€ ëª»ë°›ìŒ')} } },
        {txt:'ë„ë‘‘ì§ˆ ì‹œë„ (ìœ„í—˜)', fn:()=>{ if(Math.random()<0.25){changeStat({money:40,mood:15}); log('ğŸƒâ€â™‚ï¸ í›”ì¹˜ê¸°ì— ì„±ê³µí–ˆë‹¤! í•˜ì§€ë§Œ ì°œì°œí•˜ë‹¤...')} else {changeStat({mood:-20,energy:-15}); log('ğŸš¨ ë„ë‘‘ì§ˆì´ ë°œê°ë˜ì–´ ë„ë§ì³¤ë‹¤. ê¸°ë¶„ ìµœì•…') } } }
      ]); break;

      case 'park': showLocation('ê³µì›', 'ì•„ì´ë“¤ê³¼ ì‚°ì±…í•˜ëŠ” ì‚¬ëŒë“¤ì´ ë§ì•„ìš”. ë†€ì´ì™€ ì´ë²¤íŠ¸ê°€ ìì£¼ ë²Œì–´ì§‘ë‹ˆë‹¤.', [
        {txt:'ë‚˜ë¬´ ìœ„ì—ì„œ ì‰¬ê¸° (íšŒë³µ)', fn:()=>{changeStat({energy:20,mood:10}); log('ğŸŒ¿ ë‚˜ë¬´ ìœ„ì—ì„œ í‘¹ ì‰¬ì—ˆë‹¤. ì—ë„ˆì§€ +')}},
        {txt:'ë²„ìŠ¤í‚¹ (ê³µì—°) â€” ì‘ì€ ë¯¸ë‹ˆê²Œì„', fn:()=>{ startPerformanceMini(); }},
        {txt:'í–‰ìš´ì˜ ë™ì „ ì¤ê¸°', fn:()=>{ if(Math.random()<0.5){changeStat({money:10,mood:5}); log('ğŸª™ ë™ì „ ë°œê²¬! ëˆì´ ìƒê²¼ë‹¤.')} else {changeStat({mood:1}); log('ğŸ‚ ì•„ë¬´ê²ƒë„ ì—†ìŒ â€” ê·¸ë˜ë„ ìƒì¾Œ') } } }
      ]); break;

      case 'office': showLocation('íšŒì‚¬ ê±´ë¬¼ ë’¤í¸', 'ì‚¬ëŒë“¤ì´ ì¶œí‡´ê·¼í•˜ëŠ” ê³³. ëˆ„êµ°ê°€ ì•„ë¥´ë°”ì´íŠ¸ë¥¼ ì œì•ˆí• ì§€ë„ ëª°ë¼ìš”.', [
        {txt:'ê±´ë¬¼ ê²½ë¹„ì—ê²Œ ì¼ì„ ë¬¼ì–´ë³´ê¸°', fn:()=>{ if(Math.random()<0.6){changeStat({money:20,energy:-12,mood:5}); log('ğŸ§¾ ë‹¨ê¸° ì•„ë¥´ë°”ì´íŠ¸ë¥¼ ë°›ì•˜ë‹¤! ëˆ íšë“');} else {changeStat({mood:-3}); log('ğŸ‘” ì œì•ˆì€ ì—†ì—ˆë‹¤')} } },
        {txt:'ì±…ìƒ ìœ„ ê°„ì‹ í›”ì¹˜ê¸°', fn:()=>{ if(state.inventory.includes('ìƒì„  ì¡°ê°')){changeStat({mood:10}); log('ğŸ£ ê°€ì ¸ì˜¨ ìƒì„ ìœ¼ë¡œ ë™ë£Œì™€ ë‚˜ëˆ  ë¨¹ì—ˆë‹¤ â€” ê¸°ë¶„ ì¢‹ì•„ì§')} else if(Math.random()<0.2){changeStat({money:30,mood:10}); log('ğŸ ìš°ì—°íˆ í° íŒì„ ë°œê²¬í–ˆë‹¤!')} else {changeStat({mood:-8}); log('ğŸ˜¾ ê°„ì‹ì´ ì—†ì—ˆë‹¤')} } },
        {txt:'ì‚¬ì¥ì—ê²Œ ë§¤ë ¥ ì–´í•„ (ë„¤ê³ )', fn:()=>{ if(Math.random() < state.mood/120){changeStat({money:50,mood:20,energy:-15}); log('ğŸ† ëŒ€ë°• â€” íŠ¹ë³„ ë³´ë„ˆìŠ¤ë¥¼ ë°›ì•˜ë‹¤!')} else {changeStat({mood:-10}); log('ğŸ˜• ì–´í•„ì— ì‹¤íŒ¨í–ˆë‹¤')} } }
      ]); break;

      case 'cafe': showLocation('ì¹´í˜ ì• ê±°ë¦¬', 'ì‚¬ëŒë“¤ì´ ì‰¬ëŠ” ê³³. ëƒ„ìƒˆ ì¢‹ì€ ì»¤í”¼ì™€ ê°„ì‹, ê·¸ë¦¬ê³  ì‚¬ëŒë“¤ì´ ë‚¨ê¸´ ì´ì•¼ê¸°.', [
        {txt:'ë¨¹ë‹¤ ë‚¨ì€ ë””ì €íŠ¸ ì–»ê¸°', fn:()=>{ if(Math.random()<0.6){changeStat({energy:10,mood:8,addItem:'ì¿ í‚¤ ì¡°ê°'}); log('ğŸª ì¿ í‚¤ ì¡°ê°ì„ ì–»ì—ˆë‹¤!') } else {changeStat({mood:-2}); log('ğŸ¥± ì˜¤ëŠ˜ì€ ìš´ì´ ì—†ë‹¤') } } },
        {txt:'ì‚¬ëŒ êµ¬ê²½í•˜ë©° ì •ë³´ ìˆ˜ì§‘', fn:()=>{ changeStat({mood:5}); log('ğŸ—£ ìƒˆë¡œìš´ ì¼ìë¦¬ ì •ë³´ë¥¼ ì¡°ê¸ˆ ë“¤ì—ˆë‹¤.') } },
        {txt:'ì‚¬ì¥ë‹˜ ë°œë°‘ì—ì„œ ì• êµ ë¶€ë¦¬ê¸°', fn:()=>{ if(Math.random()<0.4){changeStat({money:12,mood:12}); log('â¤ï¸ ì‚¬ì¥ë‹˜ì´ ê°„ì‹ì„ ì£¼ì—ˆë‹¤!')} else {changeStat({mood:0}); log('ğŸ˜¼ ì‚¬ì¥ë‹˜ì´ ë°”ë¹´ë‹¤')} } }
      ]); break;

      case 'rooftop': showLocation('ì˜¥ìƒ', 'ë„ì‹œ ì „ê²½ì´ í•œëˆˆì— ë“¤ì–´ì˜¤ëŠ” ê³³. ê°€ë” ë¹„ë°€ ì´ë²¤íŠ¸ê°€ ë°œìƒí•©ë‹ˆë‹¤.', [
        {txt:'ë³„ ë³´ê¸° (ê¸°ë¶„ íšŒë³µ)', fn:()=>{changeStat({mood:15,energy:5}); log('âœ¨ ë³„ì„ ë³´ë©° ë§ˆìŒì˜ í‰í™”ë¥¼ ì–»ì—ˆë‹¤')}},
        {txt:'ë¹„ë°€ NPCì™€ ëŒ€í™”', fn:()=>{ if(Math.random()<0.35){changeStat({money:60,mood:30}); log('ğŸ— ë¹„ë°€ ì„ë¬´ë¥¼ ì„±ê³µí•˜ê³  ë³´ìƒì„ ë°›ì•˜ë‹¤!')} else {changeStat({mood:-5}); log('ğŸ‘» ì•„ë¬´ë„ ì—†ì—ˆë‹¤...') } } },
        {txt:'ê³¨ëª©ëŒ€ì¥ ë„ì „ (ë¦¬ìŠ¤í¬)', fn:()=>{ if(Math.random()<0.2){changeStat({money:100,mood:40}); log('ğŸ’¥ ê³¨ëª©ëŒ€ì¥ì„ ì´ê²¼ë‹¤! í° ë³´ìƒ')} else {changeStat({energy:-30,mood:-30}); log('ğŸ’¢ ì‹¸ì›€ì—ì„œ ì¡Œë‹¤ â€” í° ì†í•´') } } }
      ]); break;

      case 'alley': showLocation('ë’·ê³¨ëª© ë²¼ë£©ì‹œì¥', 'í¬ê·€ ì•„ì´í…œì„ ë°œê²¬í•  ìˆ˜ ìˆëŠ” ê³³.', [
        {txt:'ìƒì ë’¤ì§€ê¸°', fn:()=>{ if(Math.random()<0.5){changeStat({addItem:'í—Œ ì˜· ì¡°ê°',mood:6}); log('ğŸ“¦ í—Œ ì˜· ì¡°ê°ì„ ì°¾ì•˜ë‹¤') } else {changeStat({mood:-2}); log('ğŸ—‘ í…… ë¹„ì–´ìˆë‹¤') } } },
        {txt:'ë¬¼ê±´ êµí™˜ (ì•„ì´í…œâ†”ëˆ)', fn:()=>{ if(state.inventory.length>0){ const it = state.inventory[Math.floor(Math.random()*state.inventory.length)]; changeStat({money:15,removeItem:it}); log(`ğŸ” ${it}ì„(ë¥¼) íŒ”ì•„ 15â‚©ì„ ì–»ì—ˆë‹¤`) } else {changeStat({mood:-3}); log('ğŸ”’ íŒ” ë¬¼ê±´ì´ ì—†ë‹¤') } } },
        {txt:'ìˆ˜ìƒí•œ ìƒì¸ê³¼ ê±°ë˜', fn:()=>{ if(Math.random()<0.3){changeStat({addItem:'ì‹ ë¹„í•œ í† í°',mood:20}); log('ğŸ´ ì‹ ë¹„í•œ í† í°ì„ ì–»ì—ˆë‹¤!')} else {changeStat({mood:-10}); log('âš ï¸ ê±°ë˜ê°€ ì‚¬ê¸°ì˜€ë‹¤') } } }
      ]); break;
    }
  }

  function showLocation(title, desc, actions){
    locName.textContent = title;
    locDesc.textContent = desc;
    locActions.innerHTML = '';
    actions.forEach((a,idx)=>{
      const b = document.createElement('button'); b.className='mini'; b.textContent = a.txt;
      b.addEventListener('click', ()=>{ a.fn(); });
      locActions.appendChild(b);
      if(idx%2) locActions.appendChild(document.createTextNode(' '));
    });
    log(`â¡ï¸ ${title}ì— ë„ì°©í–ˆë‹¤.`);
  }

  // Mini-game: performance (click rhythm)
  function startPerformanceMini(){
    minigamePanel.classList.remove('hidden');
    miniContent.innerHTML = '';
    const desc = document.createElement('div');
    desc.innerHTML = '<div class="muted">ğŸ¤ ì‚¬ëŒë“¤ì„ ëª¨ìœ¼ë ¤ë©´ ë²„íŠ¼ì„ ë¹ ë¥´ê²Œ í´ë¦­í•˜ì„¸ìš”! ì œí•œì‹œê°„ 5ì´ˆ.</div>';
    const btn = document.createElement('button'); btn.textContent='ê³µì—°í•˜ê¸°!'; btn.style.marginTop='8px';
    const counter = document.createElement('div'); counter.style.marginTop='8px'; counter.textContent='í´ë¦­: 0';
    miniContent.appendChild(desc); miniContent.appendChild(btn); miniContent.appendChild(counter);
    let clicks=0, running=false, timer=null;
    btn.addEventListener('click', ()=>{
      if(!running){
        running=true; clicks=0; counter.textContent='í´ë¦­: 0';
        timer = setTimeout(()=>{ endPerformance(clicks); running=false; }, 5000);
      }
      if(running){ clicks++; counter.textContent='í´ë¦­: '+clicks; }
    });
    closeMini.onclick = ()=>{
      clearTimeout(timer); minigamePanel.classList.add('hidden'); miniContent.innerHTML='';
    };
  }
  function endPerformance(clicks){
    minigamePanel.classList.add('hidden');
    miniContent.innerHTML='';
    if(clicks >= 18){
      changeStat({money:40,mood:20,energy:-18}); log(`ğŸ‰ í›Œë¥­í•œ ê³µì—°! í´ë¦­ ${clicks}íšŒ â€” ë§ì€ ì‚¬ëŒì´ ëª¨ì—¬ íŒì„ ì¤€ë‹¤.`);
    } else if(clicks >= 8){
      changeStat({money:12,mood:8,energy:-10}); log(`ğŸ™‚ ê´œì°®ì€ ê³µì—°. í´ë¦­ ${clicks}íšŒ â€” ì†Œì†Œí•œ íŒ.`);
    } else {
      changeStat({money:0,mood:-8,energy:-6}); log(`ğŸ˜ ê³µì—°ì´ ì–´ì„¤íë‹¤. í´ë¦­ ${clicks}íšŒ â€” ê¸°ë¶„ì´ ì•ˆ ì¢‹ì•„ì§„ë‹¤.`);
    }
  }

  // save/load/new day
  saveBtn.addEventListener('click', ()=>{
    localStorage.setItem('cat_game_save', JSON.stringify(state));
    log('ğŸ’¾ ê²Œì„ì„ ì €ì¥í–ˆìŠµë‹ˆë‹¤.');
  });
  loadBtn.addEventListener('click', ()=>{
    const s = localStorage.getItem('cat_game_save');
    if(!s){ alert('ì €ì¥ëœ ê²Œì„ì´ ì—†ìŠµë‹ˆë‹¤.'); return; }
    Object.assign(state, JSON.parse(s));
    catNameInput.value = state.name;
    document.querySelector(`input[name="style"][value="${state.theme}"]`).checked = true;
    updateUI();
    log('ğŸ“‚ ì €ì¥ëœ ê²Œì„ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.');
  });
  newDayBtn.addEventListener('click', ()=>{
    state.day += 1;
    state.energy = clamp(state.energy + 30, 0, 100);
    state.mood = clamp(state.mood + 10, 0, 100);
    updateUI();
    log(`ğŸŒ… ìƒˆë¡œìš´ ë‚  (Day ${state.day}) â€” ì—ë„ˆì§€ê°€ íšŒë³µë˜ì—ˆë‹¤.`);
  });

  // keyboard quick actions (optional)
  document.addEventListener('keydown', (e)=>{
    if(e.key === 'i'){ alert('ì¸ë²¤í† ë¦¬: ' + (state.inventory.join(', ') || 'ì—†ìŒ')); }
  });

  // small tutorial start
  log('ğŸ“ íŒíŠ¸: ë§µì—ì„œ ì¥ì†Œë¥¼ í´ë¦­í•˜ê³  ë²„íŠ¼ì„ ëˆŒëŸ¬ í–‰ë™ì„ ì„ íƒí•˜ì„¸ìš”. ì—ë„ˆì§€ì™€ ê¸°ë¶„ì„ ê´€ë¦¬í•˜ì„¸ìš”.');

})();
</script>
</body>
</html>